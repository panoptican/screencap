{"version":3,"sources":["../electron/mcp/server.ts","../electron/mcp/database.ts","../electron/mcp/prompts/dailySummary.ts","../electron/mcp/formatters.ts","../electron/mcp/prompts/focusAnalysis.ts","../electron/mcp/prompts/projectStatus.ts","../electron/mcp/prompts/index.ts","../electron/mcp/resources/activity.ts","../electron/mcp/resources/memories.ts","../electron/mcp/resources/projects.ts","../electron/mcp/resources/stats.ts","../electron/mcp/resources/stories.ts","../electron/mcp/resources/index.ts","../electron/mcp/tools/analytics.ts","../electron/mcp/tools/awareness.ts","../electron/mcp/tools/events.ts","../electron/mcp/images.ts","../electron/mcp/tools/projects.ts","../electron/mcp/tools/index.ts","../electron/mcp/index.ts"],"sourcesContent":["import { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport { closeDatabase } from \"./database\";\nimport { registerPrompts } from \"./prompts\";\nimport { registerResources } from \"./resources\";\nimport { registerTools } from \"./tools\";\n\nexport async function startMcpServer(): Promise<void> {\n\tconst server = new McpServer({\n\t\tname: \"screencap\",\n\t\tversion: \"1.0.0\",\n\t});\n\n\tregisterResources(server);\n\tregisterTools(server);\n\tregisterPrompts(server);\n\n\tconst shutdown = () => {\n\t\tcloseDatabase();\n\t\tprocess.exit(0);\n\t};\n\n\tprocess.on(\"SIGINT\", shutdown);\n\tprocess.on(\"SIGTERM\", shutdown);\n\tprocess.stdin.on(\"end\", shutdown);\n\tprocess.stdin.on(\"close\", shutdown);\n\n\tconst transport = new StdioServerTransport();\n\tawait server.connect(transport);\n}\n","import { existsSync } from \"node:fs\";\nimport { homedir } from \"node:os\";\nimport { join } from \"node:path\";\nimport Database from \"better-sqlite3\";\n\nconst DEFAULT_DB_PATH = join(\n\thomedir(),\n\t\"Library/Application Support/Screencap/screencap.db\",\n);\n\nlet cachedDb: Database.Database | null = null;\n\nexport function getDbPath(): string {\n\treturn process.env.SCREENCAP_DB_PATH ?? DEFAULT_DB_PATH;\n}\n\nexport function getDatabase(): Database.Database {\n\tif (cachedDb) {\n\t\treturn cachedDb;\n\t}\n\n\tconst dbPath = getDbPath();\n\n\tif (!existsSync(dbPath)) {\n\t\tthrow new Error(\n\t\t\t`Screencap database not found at ${dbPath}. Make sure Screencap is installed and has been run at least once.`,\n\t\t);\n\t}\n\n\tcachedDb = new Database(dbPath, { readonly: true });\n\treturn cachedDb;\n}\n\nexport function closeDatabase(): void {\n\tif (cachedDb) {\n\t\tcachedDb.close();\n\t\tcachedDb = null;\n\t}\n}\n\nexport function getDayStart(date: Date = new Date()): number {\n\tconst d = new Date(date);\n\td.setHours(0, 0, 0, 0);\n\treturn d.getTime();\n}\n\nexport function getDayEnd(date: Date = new Date()): number {\n\tconst d = new Date(date);\n\td.setHours(23, 59, 59, 999);\n\treturn d.getTime();\n}\n\nexport function getWeekStart(date: Date = new Date()): number {\n\tconst d = new Date(date);\n\tconst day = d.getDay();\n\tconst diff = d.getDate() - day + (day === 0 ? -6 : 1);\n\td.setDate(diff);\n\td.setHours(0, 0, 0, 0);\n\treturn d.getTime();\n}\n\nexport function getHoursAgo(hours: number): number {\n\treturn Date.now() - hours * 60 * 60 * 1000;\n}\n\nexport function getDaysAgo(days: number): number {\n\treturn Date.now() - days * 24 * 60 * 60 * 1000;\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\nimport { getDatabase, getDayEnd, getDayStart } from \"../database\";\nimport {\n\tformatDate,\n\tformatEventsForLLM,\n\tformatMarkdownEventList,\n\tformatMarkdownTimeSummary,\n\tformatTimeSummary,\n} from \"../formatters\";\nimport type { DbEvent } from \"../types\";\n\ninterface CategoryRow {\n\tcategory: string;\n\ttotal_duration: number;\n\tevent_count: number;\n}\n\nexport function registerDailySummaryPrompt(server: McpServer): void {\n\tserver.registerPrompt(\n\t\t\"daily_summary\",\n\t\t{\n\t\t\tdescription: \"Summarize activity for a specific day\",\n\t\t\targsSchema: {\n\t\t\t\tdate: z\n\t\t\t\t\t.string()\n\t\t\t\t\t.optional()\n\t\t\t\t\t.describe(\"Date in YYYY-MM-DD format (defaults to today)\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tlet targetDate: Date;\n\t\t\tif (!params.date) {\n\t\t\t\ttargetDate = new Date();\n\t\t\t} else {\n\t\t\t\ttargetDate = new Date(params.date);\n\t\t\t}\n\n\t\t\tconst dayStart = getDayStart(targetDate);\n\t\t\tconst dayEnd = getDayEnd(targetDate);\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[number, number], DbEvent>(\n\t\t\t\t\t`\n          SELECT * FROM events\n          WHERE timestamp >= ? AND timestamp <= ?\n            AND dismissed = 0 AND status = 'completed'\n          ORDER BY timestamp ASC\n        `,\n\t\t\t\t)\n\t\t\t\t.all(dayStart, dayEnd);\n\n\t\t\tconst categoryRows = db\n\t\t\t\t.prepare<[number, number], CategoryRow>(\n\t\t\t\t\t`\n          SELECT \n            COALESCE(category, 'Unknown') as category,\n            SUM(COALESCE(end_timestamp, timestamp + 60000) - timestamp) as total_duration,\n            COUNT(*) as event_count\n          FROM events\n          WHERE timestamp >= ? AND timestamp <= ?\n            AND dismissed = 0 AND status = 'completed'\n          GROUP BY category\n          ORDER BY total_duration DESC\n        `,\n\t\t\t\t)\n\t\t\t\t.all(dayStart, dayEnd);\n\n\t\t\tconst formatted = formatEventsForLLM(events, false);\n\t\t\tconst stats = categoryRows.map((r) => ({\n\t\t\t\tcategory: r.category,\n\t\t\t\ttotalMs: r.total_duration,\n\t\t\t\tcount: r.event_count,\n\t\t\t}));\n\t\t\tconst summary = formatTimeSummary(stats, formatDate(dayStart));\n\n\t\t\tconst eventList = formatMarkdownEventList(formatted);\n\t\t\tconst statsSummary = formatMarkdownTimeSummary(summary);\n\n\t\t\treturn {\n\t\t\t\tmessages: [\n\t\t\t\t\t{\n\t\t\t\t\t\trole: \"user\",\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\ttext: `Here's my activity data for ${formatDate(dayStart)}:\n\n## Time Breakdown\n${statsSummary}\n\n## Activity Timeline (${events.length} events)\n${eventList}\n\nPlease provide an honest summary of how I spent my time, what I accomplished, and any patterns you notice (good or concerning). Be direct and constructive.`,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type {\n\tDbEvent,\n\tFocusScore,\n\tFormattedAddictionStats,\n\tFormattedAppUsage,\n\tFormattedEvent,\n\tFormattedProject,\n\tFormattedTimeSummary,\n\tFormattedWebsiteUsage,\n\tPeriodComparison,\n} from \"./types\";\n\nexport function formatTime(timestamp: number, includeDate = false): string {\n\tconst date = new Date(timestamp);\n\tconst timeStr = date.toLocaleTimeString(\"en-US\", {\n\t\thour: \"numeric\",\n\t\tminute: \"2-digit\",\n\t\thour12: true,\n\t});\n\n\tif (includeDate) {\n\t\tconst dateStr = date.toLocaleDateString(\"en-US\", {\n\t\t\tmonth: \"short\",\n\t\t\tday: \"numeric\",\n\t\t});\n\t\treturn `${dateStr}, ${timeStr}`;\n\t}\n\n\treturn timeStr;\n}\n\nexport function formatDuration(ms: number): string {\n\tif (ms < 0) return \"0m\";\n\n\tconst hours = Math.floor(ms / (1000 * 60 * 60));\n\tconst minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));\n\n\tif (hours > 0) {\n\t\treturn minutes > 0 ? `${hours}h ${minutes}m` : `${hours}h`;\n\t}\n\treturn `${minutes}m`;\n}\n\nexport function formatDate(timestamp: number): string {\n\treturn new Date(timestamp).toLocaleDateString(\"en-US\", {\n\t\tweekday: \"long\",\n\t\tmonth: \"long\",\n\t\tday: \"numeric\",\n\t\tyear: \"numeric\",\n\t});\n}\n\nexport function formatDateShort(timestamp: number): string {\n\treturn new Date(timestamp).toLocaleDateString(\"en-US\", {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t});\n}\n\nexport function formatEventForLLM(\n\tevent: DbEvent,\n\tincludeDate = false,\n): FormattedEvent {\n\tconst duration =\n\t\tevent.end_timestamp && event.timestamp\n\t\t\t? formatDuration(event.end_timestamp - event.timestamp)\n\t\t\t: null;\n\n\tconst context = event.url_host || truncateWindowTitle(event.window_title);\n\n\treturn {\n\t\tid: event.id,\n\t\ttime: formatTime(event.timestamp, includeDate),\n\t\tduration,\n\t\tactivity: event.caption || \"Unknown activity\",\n\t\tcategory: event.category || \"Unknown\",\n\t\t...(event.project && { project: event.project }),\n\t\t...(event.app_name && { app: event.app_name }),\n\t\t...(context && { context }),\n\t\t...(event.project_progress > 0 && { isProgress: true }),\n\t\t...(event.url_canonical && { url: event.url_canonical }),\n\t};\n}\n\nexport function formatEventsForLLM(\n\tevents: DbEvent[],\n\tincludeDate = false,\n): FormattedEvent[] {\n\treturn events.map((e) => formatEventForLLM(e, includeDate));\n}\n\nfunction truncateWindowTitle(\n\ttitle: string | null,\n\tmaxLength = 60,\n): string | null {\n\tif (!title) return null;\n\tif (title.length <= maxLength) return title;\n\treturn `${title.slice(0, maxLength - 3)}...`;\n}\n\nexport function formatTimeSummary(\n\tcategoryStats: { category: string; totalMs: number; count: number }[],\n\tperiodLabel: string,\n): FormattedTimeSummary {\n\tconst totalMs = categoryStats.reduce((sum, c) => sum + c.totalMs, 0);\n\n\treturn {\n\t\tperiod: periodLabel,\n\t\ttotalTime: formatDuration(totalMs),\n\t\tbreakdown: categoryStats\n\t\t\t.sort((a, b) => b.totalMs - a.totalMs)\n\t\t\t.map((c) => ({\n\t\t\t\tcategory: c.category,\n\t\t\t\ttime: formatDuration(c.totalMs),\n\t\t\t\tpercent: totalMs > 0 ? Math.round((c.totalMs / totalMs) * 100) : 0,\n\t\t\t\teventCount: c.count,\n\t\t\t})),\n\t};\n}\n\nexport function formatAppUsage(\n\tapps: { app: string; totalMs: number; count: number }[],\n\ttotalMs: number,\n): FormattedAppUsage[] {\n\treturn apps.map((a) => ({\n\t\tapp: a.app,\n\t\ttime: formatDuration(a.totalMs),\n\t\teventCount: a.count,\n\t\tpercent: totalMs > 0 ? Math.round((a.totalMs / totalMs) * 100) : 0,\n\t}));\n}\n\nexport function formatWebsiteUsage(\n\thosts: { host: string; totalMs: number; count: number }[],\n\ttotalMs: number,\n): FormattedWebsiteUsage[] {\n\treturn hosts.map((h) => ({\n\t\thost: h.host,\n\t\ttime: formatDuration(h.totalMs),\n\t\teventCount: h.count,\n\t\tpercent: totalMs > 0 ? Math.round((h.totalMs / totalMs) * 100) : 0,\n\t}));\n}\n\nexport function formatProject(\n\tname: string,\n\teventCount: number,\n\tprogressCount: number,\n\tlastActivityTs: number | null,\n\ttotalMs: number,\n): FormattedProject {\n\treturn {\n\t\tname,\n\t\teventCount,\n\t\tprogressCount,\n\t\tlastActivity: lastActivityTs ? formatTime(lastActivityTs, true) : null,\n\t\ttotalTime: formatDuration(totalMs),\n\t};\n}\n\nexport function formatFocusScore(\n\tdate: Date,\n\tfocusMs: number,\n\tdistractionMs: number,\n\tfocusCategories: string[],\n\ttopDistractions: { name: string; ms: number }[],\n): FocusScore {\n\tconst totalMs = focusMs + distractionMs;\n\tconst score = totalMs > 0 ? Math.round((focusMs / totalMs) * 100) : 0;\n\n\treturn {\n\t\tdate: formatDate(date.getTime()),\n\t\tscore,\n\t\tfocusTime: formatDuration(focusMs),\n\t\tdistractionTime: formatDuration(distractionMs),\n\t\tfocusCategories,\n\t\ttopDistractions: topDistractions.map(\n\t\t\t(d) => `${d.name} (${formatDuration(d.ms)})`,\n\t\t),\n\t};\n}\n\nexport function formatAddictionStats(\n\tname: string,\n\tlastIncidentAt: number | null,\n\tthisWeekCount: number,\n\tlastWeekCount: number,\n): FormattedAddictionStats {\n\tlet trend: \"increasing\" | \"decreasing\" | \"stable\" = \"stable\";\n\tif (thisWeekCount > lastWeekCount) trend = \"increasing\";\n\telse if (thisWeekCount < lastWeekCount) trend = \"decreasing\";\n\n\treturn {\n\t\tname,\n\t\tlastIncidentAt: lastIncidentAt ? formatTime(lastIncidentAt, true) : null,\n\t\tthisWeekCount,\n\t\tlastWeekCount,\n\t\ttrend,\n\t};\n}\n\nexport function formatPeriodComparison(\n\tperiod1Label: string,\n\tperiod2Label: string,\n\tperiod1Stats: { focusMs: number; distractionMs: number; count: number },\n\tperiod2Stats: { focusMs: number; distractionMs: number; count: number },\n): PeriodComparison {\n\tconst p1Total = period1Stats.focusMs + period1Stats.distractionMs;\n\tconst p2Total = period2Stats.focusMs + period2Stats.distractionMs;\n\n\tconst focusChange =\n\t\tperiod2Stats.focusMs > 0\n\t\t\t? Math.round(\n\t\t\t\t\t((period1Stats.focusMs - period2Stats.focusMs) /\n\t\t\t\t\t\tperiod2Stats.focusMs) *\n\t\t\t\t\t\t100,\n\t\t\t\t)\n\t\t\t: 0;\n\n\tconst distractionChange =\n\t\tperiod2Stats.distractionMs > 0\n\t\t\t? Math.round(\n\t\t\t\t\t((period1Stats.distractionMs - period2Stats.distractionMs) /\n\t\t\t\t\t\tperiod2Stats.distractionMs) *\n\t\t\t\t\t\t100,\n\t\t\t\t)\n\t\t\t: 0;\n\n\tlet productivityTrend: \"improved\" | \"declined\" | \"stable\" = \"stable\";\n\tif (focusChange > 10 || distractionChange < -10)\n\t\tproductivityTrend = \"improved\";\n\telse if (focusChange < -10 || distractionChange > 10)\n\t\tproductivityTrend = \"declined\";\n\n\treturn {\n\t\tperiod1Label,\n\t\tperiod2Label,\n\t\tperiod1: {\n\t\t\ttotalTime: formatDuration(p1Total),\n\t\t\tfocusTime: formatDuration(period1Stats.focusMs),\n\t\t\tdistractionTime: formatDuration(period1Stats.distractionMs),\n\t\t\teventCount: period1Stats.count,\n\t\t},\n\t\tperiod2: {\n\t\t\ttotalTime: formatDuration(p2Total),\n\t\t\tfocusTime: formatDuration(period2Stats.focusMs),\n\t\t\tdistractionTime: formatDuration(period2Stats.distractionMs),\n\t\t\teventCount: period2Stats.count,\n\t\t},\n\t\tchange: {\n\t\t\tfocusTimePercent: focusChange,\n\t\t\tdistractionTimePercent: distractionChange,\n\t\t\tproductivityTrend,\n\t\t},\n\t};\n}\n\nexport function formatMarkdownEventList(events: FormattedEvent[]): string {\n\tif (events.length === 0) return \"No events found.\";\n\n\treturn events\n\t\t.map((e) => {\n\t\t\tconst parts = [`- **${e.time}**`];\n\t\t\tif (e.duration) parts.push(`(${e.duration})`);\n\t\t\tparts.push(`- ${e.activity}`);\n\t\t\tif (e.project) parts.push(`[${e.project}]`);\n\t\t\tif (e.app) parts.push(`(${e.app})`);\n\t\t\treturn parts.join(\" \");\n\t\t})\n\t\t.join(\"\\n\");\n}\n\nexport function formatMarkdownTimeSummary(\n\tsummary: FormattedTimeSummary,\n): string {\n\tconst lines = [`**${summary.period}** - Total: ${summary.totalTime}\\n`];\n\n\tfor (const item of summary.breakdown) {\n\t\tlines.push(\n\t\t\t`- ${item.category}: ${item.time} (${item.percent}%) - ${item.eventCount} events`,\n\t\t);\n\t}\n\n\treturn lines.join(\"\\n\");\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\nimport { getDatabase, getDayEnd, getDayStart, getWeekStart } from \"../database\";\nimport { formatDate, formatDateShort, formatDuration } from \"../formatters\";\nimport type { DbEvent, DbMemory } from \"../types\";\n\nexport function registerFocusAnalysisPrompt(server: McpServer): void {\n\tserver.registerPrompt(\n\t\t\"focus_analysis\",\n\t\t{\n\t\t\tdescription: \"Analyze focus and distraction patterns\",\n\t\t\targsSchema: {\n\t\t\t\tperiod: z\n\t\t\t\t\t.enum([\"today\", \"week\"])\n\t\t\t\t\t.default(\"today\")\n\t\t\t\t\t.describe(\"Analysis period\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tlet startDate: number;\n\t\t\tlet endDate: number;\n\t\t\tlet periodLabel: string;\n\n\t\t\tif (params.period === \"week\") {\n\t\t\t\tstartDate = getWeekStart();\n\t\t\t\tendDate = Date.now();\n\t\t\t\tperiodLabel = `This week (${formatDateShort(startDate)} - ${formatDateShort(endDate)})`;\n\t\t\t} else {\n\t\t\t\tstartDate = getDayStart();\n\t\t\t\tendDate = getDayEnd();\n\t\t\t\tperiodLabel = formatDate(startDate);\n\t\t\t}\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[number, number], DbEvent>(\n\t\t\t\t\t`\n          SELECT * FROM events\n          WHERE timestamp >= ? AND timestamp <= ?\n            AND dismissed = 0 AND status = 'completed'\n        `,\n\t\t\t\t)\n\t\t\t\t.all(startDate, endDate);\n\n\t\t\tconst addictions = db\n\t\t\t\t.prepare<[], DbMemory>(`SELECT * FROM memory WHERE type = 'addiction'`)\n\t\t\t\t.all();\n\n\t\t\tconst focusCategories = [\"Work\", \"Study\"];\n\t\t\tconst categoryTimes: Record<string, number> = {};\n\t\t\tconst addictionTimes: Record<string, number> = {};\n\t\t\tlet focusMs = 0;\n\t\t\tlet distractionMs = 0;\n\t\t\tlet otherMs = 0;\n\n\t\t\tfor (const event of events) {\n\t\t\t\tconst duration =\n\t\t\t\t\t(event.end_timestamp || event.timestamp + 60000) - event.timestamp;\n\t\t\t\tconst category = event.category || \"Unknown\";\n\n\t\t\t\tcategoryTimes[category] = (categoryTimes[category] || 0) + duration;\n\n\t\t\t\tif (event.tracked_addiction) {\n\t\t\t\t\tdistractionMs += duration;\n\t\t\t\t\taddictionTimes[event.tracked_addiction] =\n\t\t\t\t\t\t(addictionTimes[event.tracked_addiction] || 0) + duration;\n\t\t\t\t} else if (focusCategories.includes(category)) {\n\t\t\t\t\tfocusMs += duration;\n\t\t\t\t} else {\n\t\t\t\t\totherMs += duration;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst totalMs = focusMs + distractionMs + otherMs;\n\t\t\tconst focusPercent =\n\t\t\t\ttotalMs > 0 ? Math.round((focusMs / totalMs) * 100) : 0;\n\t\t\tconst distractionPercent =\n\t\t\t\ttotalMs > 0 ? Math.round((distractionMs / totalMs) * 100) : 0;\n\n\t\t\tconst categoryBreakdown = Object.entries(categoryTimes)\n\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t.map(([cat, ms]) => `- ${cat}: ${formatDuration(ms)}`)\n\t\t\t\t.join(\"\\n\");\n\n\t\t\tconst addictionBreakdown = Object.entries(addictionTimes)\n\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t.map(([name, ms]) => `- ${name}: ${formatDuration(ms)}`)\n\t\t\t\t.join(\"\\n\");\n\n\t\t\treturn {\n\t\t\t\tmessages: [\n\t\t\t\t\t{\n\t\t\t\t\t\trole: \"user\",\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\ttext: `Here's my focus analysis for ${periodLabel}:\n\n## Summary\n- **Total tracked time**: ${formatDuration(totalMs)}\n- **Focus time** (Work + Study): ${formatDuration(focusMs)} (${focusPercent}%)\n- **Distraction time** (tracked addictions): ${formatDuration(distractionMs)} (${distractionPercent}%)\n- **Other activities**: ${formatDuration(otherMs)}\n\n## Category Breakdown\n${categoryBreakdown}\n\n## Tracked Distractions\n${addictionBreakdown || \"No distractions tracked.\"}\n\n## Tracked Addictions\n${addictions.map((a) => `- ${a.content}${a.description ? `: ${a.description}` : \"\"}`).join(\"\\n\") || \"None configured.\"}\n\nPlease analyze my focus patterns. Be honest about:\n1. How well am I focusing?\n2. What are my main distractions?\n3. Any concerning patterns?\n4. Suggestions for improvement?`,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\nimport { getDatabase, getDaysAgo } from \"../database\";\nimport {\n\tformatDuration,\n\tformatEventsForLLM,\n\tformatMarkdownEventList,\n} from \"../formatters\";\nimport type { DbEvent } from \"../types\";\n\nexport function registerProjectStatusPrompt(server: McpServer): void {\n\tserver.registerPrompt(\n\t\t\"project_status\",\n\t\t{\n\t\t\tdescription: \"Get status summary for a specific project\",\n\t\t\targsSchema: {\n\t\t\t\tproject: z.string().describe(\"Project name\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\t\t\tconst weekAgo = getDaysAgo(7);\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[string, number], DbEvent>(\n\t\t\t\t\t`\n          SELECT * FROM events\n          WHERE project = ? AND timestamp >= ?\n            AND dismissed = 0 AND status = 'completed'\n          ORDER BY timestamp DESC\n        `,\n\t\t\t\t)\n\t\t\t\t.all(params.project, weekAgo);\n\n\t\t\tconst progressEvents = events.filter((e) => e.project_progress > 0);\n\t\t\tconst totalMs = events.reduce((sum, e) => {\n\t\t\t\tconst duration = (e.end_timestamp || e.timestamp + 60000) - e.timestamp;\n\t\t\t\treturn sum + duration;\n\t\t\t}, 0);\n\n\t\t\tconst formatted = formatEventsForLLM(events.slice(0, 20), true);\n\t\t\tconst progressFormatted = formatEventsForLLM(\n\t\t\t\tprogressEvents.slice(0, 10),\n\t\t\t\ttrue,\n\t\t\t);\n\n\t\t\tconst eventList = formatMarkdownEventList(formatted);\n\t\t\tconst progressList = formatMarkdownEventList(progressFormatted);\n\n\t\t\treturn {\n\t\t\t\tmessages: [\n\t\t\t\t\t{\n\t\t\t\t\t\trole: \"user\",\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\ttext: `Here's the status for project \"${params.project}\" over the last 7 days:\n\n## Overview\n- Total time spent: ${formatDuration(totalMs)}\n- Total events: ${events.length}\n- Progress markers: ${progressEvents.length}\n\n## Progress Events\n${progressList || \"No progress events recorded.\"}\n\n## Recent Activity\n${eventList}\n\nPlease provide a summary of the project status: what progress has been made, what seems to be the current focus, and any observations about the work pattern.`,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { registerDailySummaryPrompt } from \"./dailySummary\";\nimport { registerFocusAnalysisPrompt } from \"./focusAnalysis\";\nimport { registerProjectStatusPrompt } from \"./projectStatus\";\n\nexport function registerPrompts(server: McpServer): void {\n\tregisterDailySummaryPrompt(server);\n\tregisterProjectStatusPrompt(server);\n\tregisterFocusAnalysisPrompt(server);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { getDatabase, getDayStart, getHoursAgo } from \"../database\";\nimport { formatEventsForLLM } from \"../formatters\";\nimport type { DbEvent } from \"../types\";\n\nexport function registerActivityResources(server: McpServer): void {\n\tserver.registerResource(\n\t\t\"activity-today\",\n\t\t\"screencap://activity/today\",\n\t\t{ description: \"Today's activity events\" },\n\t\tasync () => {\n\t\t\tconst db = getDatabase();\n\t\t\tconst dayStart = getDayStart();\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[number], DbEvent>(\n\t\t\t\t\t`\n        SELECT *\n        FROM events\n        WHERE timestamp >= ? AND dismissed = 0 AND status = 'completed'\n        ORDER BY timestamp DESC\n      `,\n\t\t\t\t)\n\t\t\t\t.all(dayStart);\n\n\t\t\tconst formatted = formatEventsForLLM(events, false);\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://activity/today\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(formatted, null, 2),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerResource(\n\t\t\"activity-recent\",\n\t\t\"screencap://activity/recent\",\n\t\t{ description: \"Recent activity (last 2 hours)\" },\n\t\tasync () => {\n\t\t\tconst db = getDatabase();\n\t\t\tconst twoHoursAgo = getHoursAgo(2);\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[number], DbEvent>(\n\t\t\t\t\t`\n          SELECT *\n          FROM events\n          WHERE timestamp >= ? AND dismissed = 0 AND status = 'completed'\n          ORDER BY timestamp DESC\n          LIMIT 50\n        `,\n\t\t\t\t)\n\t\t\t\t.all(twoHoursAgo);\n\n\t\t\tconst formatted = formatEventsForLLM(events, false);\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://activity/recent\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(formatted, null, 2),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { getDatabase, getDayEnd, getDayStart } from \"../database\";\nimport type { DbEodEntry, DbMemory } from \"../types\";\n\nexport function registerMemoriesResources(server: McpServer): void {\n\tserver.registerResource(\n\t\t\"memories\",\n\t\t\"screencap://memories\",\n\t\t{ description: \"User memories (projects, addictions, preferences)\" },\n\t\tasync () => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst memories = db\n\t\t\t\t.prepare<[], DbMemory>(\n\t\t\t\t\t`\n        SELECT *\n        FROM memory\n        ORDER BY updated_at DESC\n      `,\n\t\t\t\t)\n\t\t\t\t.all();\n\n\t\t\tconst formatted = memories.map((m) => ({\n\t\t\t\tid: m.id,\n\t\t\t\ttype: m.type,\n\t\t\t\tname: m.content,\n\t\t\t\tdescription: m.description,\n\t\t\t}));\n\n\t\t\tconst grouped = {\n\t\t\t\tprojects: formatted.filter((m) => m.type === \"project\"),\n\t\t\t\taddictions: formatted.filter((m) => m.type === \"addiction\"),\n\t\t\t\tpreferences: formatted.filter((m) => m.type === \"preference\"),\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://memories\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(grouped, null, 2),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerResource(\n\t\t\"eod-today\",\n\t\t\"screencap://eod/today\",\n\t\t{ description: \"Today's end-of-day entry\" },\n\t\tasync () => {\n\t\t\tconst db = getDatabase();\n\t\t\tconst dayStart = getDayStart();\n\t\t\tconst dayEnd = getDayEnd();\n\n\t\t\tconst entry = db\n\t\t\t\t.prepare<[number, number], DbEodEntry>(\n\t\t\t\t\t`\n        SELECT *\n        FROM eod_entries\n        WHERE day_start >= ? AND day_end <= ?\n        ORDER BY created_at DESC\n        LIMIT 1\n      `,\n\t\t\t\t)\n\t\t\t\t.get(dayStart, dayEnd);\n\n\t\t\tif (!entry) {\n\t\t\t\treturn {\n\t\t\t\t\tcontents: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turi: \"screencap://eod/today\",\n\t\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\t\ttext: JSON.stringify({\n\t\t\t\t\t\t\t\texists: false,\n\t\t\t\t\t\t\t\tmessage: \"No end-of-day entry for today\",\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlet parsedContent: unknown;\n\t\t\ttry {\n\t\t\t\tparsedContent = JSON.parse(entry.content);\n\t\t\t} catch {\n\t\t\t\tparsedContent = entry.content;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://eod/today\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\texists: true,\n\t\t\t\t\t\t\t\tsubmitted: entry.submitted_at !== null,\n\t\t\t\t\t\t\t\tcontent: parsedContent,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { getDatabase } from \"../database\";\nimport { formatProject } from \"../formatters\";\n\ninterface ProjectRow {\n\tproject: string;\n\tevent_count: number;\n\tprogress_count: number;\n\tlast_activity: number;\n\ttotal_duration: number;\n}\n\nexport function registerProjectsResources(server: McpServer): void {\n\tserver.registerResource(\n\t\t\"projects-list\",\n\t\t\"screencap://projects\",\n\t\t{ description: \"List of all tracked projects\" },\n\t\tasync () => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst rows = db\n\t\t\t\t.prepare<[], ProjectRow>(\n\t\t\t\t\t`\n        SELECT \n          project,\n          COUNT(*) as event_count,\n          SUM(CASE WHEN project_progress > 0 THEN 1 ELSE 0 END) as progress_count,\n          MAX(timestamp) as last_activity,\n          SUM(COALESCE(end_timestamp, timestamp + 60000) - timestamp) as total_duration\n        FROM events\n        WHERE project IS NOT NULL AND project != ''\n          AND dismissed = 0 AND status = 'completed'\n        GROUP BY project\n        ORDER BY last_activity DESC\n      `,\n\t\t\t\t)\n\t\t\t\t.all();\n\n\t\t\tconst projects = rows.map((r) =>\n\t\t\t\tformatProject(\n\t\t\t\t\tr.project,\n\t\t\t\t\tr.event_count,\n\t\t\t\t\tr.progress_count,\n\t\t\t\t\tr.last_activity,\n\t\t\t\t\tr.total_duration,\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://projects\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(projects, null, 2),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { getDatabase, getDayEnd, getDayStart, getWeekStart } from \"../database\";\nimport { formatTimeSummary } from \"../formatters\";\n\ninterface CategoryRow {\n\tcategory: string;\n\ttotal_duration: number;\n\tevent_count: number;\n}\n\nfunction getCategoryStats(startDate: number, endDate: number): CategoryRow[] {\n\tconst db = getDatabase();\n\n\treturn db\n\t\t.prepare<[number, number], CategoryRow>(\n\t\t\t`\n      SELECT \n        COALESCE(category, 'Unknown') as category,\n        SUM(COALESCE(end_timestamp, timestamp + 60000) - timestamp) as total_duration,\n        COUNT(*) as event_count\n      FROM events\n      WHERE timestamp >= ? AND timestamp <= ?\n        AND dismissed = 0 AND status = 'completed'\n      GROUP BY category\n      ORDER BY total_duration DESC\n    `,\n\t\t)\n\t\t.all(startDate, endDate);\n}\n\nexport function registerStatsResources(server: McpServer): void {\n\tserver.registerResource(\n\t\t\"stats-today\",\n\t\t\"screencap://stats/today\",\n\t\t{ description: \"Today's time statistics by category\" },\n\t\tasync () => {\n\t\t\tconst dayStart = getDayStart();\n\t\t\tconst dayEnd = getDayEnd();\n\n\t\t\tconst rows = getCategoryStats(dayStart, dayEnd);\n\t\t\tconst stats = rows.map((r) => ({\n\t\t\t\tcategory: r.category,\n\t\t\t\ttotalMs: r.total_duration,\n\t\t\t\tcount: r.event_count,\n\t\t\t}));\n\n\t\t\tconst summary = formatTimeSummary(stats, \"Today\");\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://stats/today\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(summary, null, 2),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerResource(\n\t\t\"stats-week\",\n\t\t\"screencap://stats/week\",\n\t\t{ description: \"This week's time statistics by category\" },\n\t\tasync () => {\n\t\t\tconst weekStart = getWeekStart();\n\t\t\tconst now = Date.now();\n\n\t\t\tconst rows = getCategoryStats(weekStart, now);\n\t\t\tconst stats = rows.map((r) => ({\n\t\t\t\tcategory: r.category,\n\t\t\t\ttotalMs: r.total_duration,\n\t\t\t\tcount: r.event_count,\n\t\t\t}));\n\n\t\t\tconst summary = formatTimeSummary(stats, \"This Week\");\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://stats/week\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(summary, null, 2),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { getDatabase } from \"../database\";\nimport { formatDateShort } from \"../formatters\";\nimport type { DbStory } from \"../types\";\n\nexport function registerStoriesResources(server: McpServer): void {\n\tserver.registerResource(\n\t\t\"stories-latest\",\n\t\t\"screencap://stories/latest\",\n\t\t{ description: \"Latest generated stories\" },\n\t\tasync () => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst stories = db\n\t\t\t\t.prepare<[], DbStory>(\n\t\t\t\t\t`\n        SELECT *\n        FROM stories\n        ORDER BY created_at DESC\n        LIMIT 5\n      `,\n\t\t\t\t)\n\t\t\t\t.all();\n\n\t\t\tconst formatted = stories.map((s) => ({\n\t\t\t\tid: s.id,\n\t\t\t\ttype: s.period_type,\n\t\t\t\tperiod: `${formatDateShort(s.period_start)} - ${formatDateShort(s.period_end)}`,\n\t\t\t\tcontent: s.content,\n\t\t\t\tcreatedAt: formatDateShort(s.created_at),\n\t\t\t}));\n\n\t\t\treturn {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\turi: \"screencap://stories/latest\",\n\t\t\t\t\t\tmimeType: \"application/json\",\n\t\t\t\t\t\ttext: JSON.stringify(formatted, null, 2),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { registerActivityResources } from \"./activity\";\nimport { registerMemoriesResources } from \"./memories\";\nimport { registerProjectsResources } from \"./projects\";\nimport { registerStatsResources } from \"./stats\";\nimport { registerStoriesResources } from \"./stories\";\n\nexport function registerResources(server: McpServer): void {\n\tregisterActivityResources(server);\n\tregisterStatsResources(server);\n\tregisterProjectsResources(server);\n\tregisterStoriesResources(server);\n\tregisterMemoriesResources(server);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\nimport { getDatabase } from \"../database\";\nimport {\n\tformatAppUsage,\n\tformatDateShort,\n\tformatPeriodComparison,\n\tformatTimeSummary,\n\tformatWebsiteUsage,\n} from \"../formatters\";\n\ninterface CategoryRow {\n\tcategory: string;\n\ttotal_duration: number;\n\tevent_count: number;\n}\n\ninterface AppRow {\n\tapp_name: string;\n\ttotal_duration: number;\n\tevent_count: number;\n}\n\ninterface HostRow {\n\turl_host: string;\n\ttotal_duration: number;\n\tevent_count: number;\n}\n\nexport function registerAnalyticsTools(server: McpServer): void {\n\tserver.registerTool(\n\t\t\"get_time_summary\",\n\t\t{\n\t\t\tdescription: \"Get category/time breakdown for a period\",\n\t\t\tinputSchema: {\n\t\t\t\tstartDate: z.number().describe(\"Start timestamp (ms)\"),\n\t\t\t\tendDate: z.number().describe(\"End timestamp (ms)\"),\n\t\t\t\tgroupBy: z\n\t\t\t\t\t.enum([\"category\", \"project\"])\n\t\t\t\t\t.default(\"category\")\n\t\t\t\t\t.describe(\"Group by category or project\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst groupColumn = params.groupBy === \"project\" ? \"project\" : \"category\";\n\n\t\t\tconst rows = db\n\t\t\t\t.prepare<[number, number], CategoryRow>(\n\t\t\t\t\t`\n          SELECT \n            COALESCE(${groupColumn}, 'Unknown') as category,\n            SUM(COALESCE(end_timestamp, timestamp + 60000) - timestamp) as total_duration,\n            COUNT(*) as event_count\n          FROM events\n          WHERE timestamp >= ? AND timestamp <= ?\n            AND dismissed = 0 AND status = 'completed'\n          GROUP BY ${groupColumn}\n          ORDER BY total_duration DESC\n        `,\n\t\t\t\t)\n\t\t\t\t.all(params.startDate, params.endDate);\n\n\t\t\tconst stats = rows.map((r) => ({\n\t\t\t\tcategory: r.category,\n\t\t\t\ttotalMs: r.total_duration,\n\t\t\t\tcount: r.event_count,\n\t\t\t}));\n\n\t\t\tconst periodLabel = `${formatDateShort(params.startDate)} - ${formatDateShort(params.endDate)}`;\n\t\t\tconst summary = formatTimeSummary(stats, periodLabel);\n\n\t\t\treturn {\n\t\t\t\tcontent: [{ type: \"text\", text: JSON.stringify(summary, null, 2) }],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"get_app_usage\",\n\t\t{\n\t\t\tdescription: \"Get app usage statistics\",\n\t\t\tinputSchema: {\n\t\t\t\tstartDate: z.number().optional().describe(\"Start timestamp (ms)\"),\n\t\t\t\tendDate: z.number().optional().describe(\"End timestamp (ms)\"),\n\t\t\t\tlimit: z\n\t\t\t\t\t.number()\n\t\t\t\t\t.default(10)\n\t\t\t\t\t.describe(\"Maximum number of apps to return\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst conditions: string[] = [\n\t\t\t\t\"dismissed = 0\",\n\t\t\t\t\"status = 'completed'\",\n\t\t\t\t\"app_name IS NOT NULL\",\n\t\t\t];\n\t\t\tconst values: number[] = [];\n\n\t\t\tif (params.startDate) {\n\t\t\t\tconditions.push(\"timestamp >= ?\");\n\t\t\t\tvalues.push(params.startDate);\n\t\t\t}\n\t\t\tif (params.endDate) {\n\t\t\t\tconditions.push(\"timestamp <= ?\");\n\t\t\t\tvalues.push(params.endDate);\n\t\t\t}\n\n\t\t\tconst query = `\n        SELECT \n          app_name,\n          SUM(COALESCE(end_timestamp, timestamp + 60000) - timestamp) as total_duration,\n          COUNT(*) as event_count\n        FROM events\n        WHERE ${conditions.join(\" AND \")}\n        GROUP BY app_name\n        ORDER BY total_duration DESC\n        LIMIT ?\n      `;\n\t\t\tvalues.push(params.limit);\n\n\t\t\tconst rows = db.prepare<unknown[], AppRow>(query).all(...values);\n\n\t\t\tconst totalMs = rows.reduce((sum, r) => sum + r.total_duration, 0);\n\t\t\tconst formatted = formatAppUsage(\n\t\t\t\trows.map((r) => ({\n\t\t\t\t\tapp: r.app_name,\n\t\t\t\t\ttotalMs: r.total_duration,\n\t\t\t\t\tcount: r.event_count,\n\t\t\t\t})),\n\t\t\t\ttotalMs,\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tcontent: [{ type: \"text\", text: JSON.stringify(formatted, null, 2) }],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"get_website_usage\",\n\t\t{\n\t\t\tdescription: \"Get website usage statistics\",\n\t\t\tinputSchema: {\n\t\t\t\tstartDate: z.number().optional().describe(\"Start timestamp (ms)\"),\n\t\t\t\tendDate: z.number().optional().describe(\"End timestamp (ms)\"),\n\t\t\t\tlimit: z\n\t\t\t\t\t.number()\n\t\t\t\t\t.default(10)\n\t\t\t\t\t.describe(\"Maximum number of websites to return\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst conditions: string[] = [\n\t\t\t\t\"dismissed = 0\",\n\t\t\t\t\"status = 'completed'\",\n\t\t\t\t\"url_host IS NOT NULL\",\n\t\t\t];\n\t\t\tconst values: number[] = [];\n\n\t\t\tif (params.startDate) {\n\t\t\t\tconditions.push(\"timestamp >= ?\");\n\t\t\t\tvalues.push(params.startDate);\n\t\t\t}\n\t\t\tif (params.endDate) {\n\t\t\t\tconditions.push(\"timestamp <= ?\");\n\t\t\t\tvalues.push(params.endDate);\n\t\t\t}\n\n\t\t\tconst query = `\n        SELECT \n          url_host,\n          SUM(COALESCE(end_timestamp, timestamp + 60000) - timestamp) as total_duration,\n          COUNT(*) as event_count\n        FROM events\n        WHERE ${conditions.join(\" AND \")}\n        GROUP BY url_host\n        ORDER BY total_duration DESC\n        LIMIT ?\n      `;\n\t\t\tvalues.push(params.limit);\n\n\t\t\tconst rows = db.prepare<unknown[], HostRow>(query).all(...values);\n\n\t\t\tconst totalMs = rows.reduce((sum, r) => sum + r.total_duration, 0);\n\t\t\tconst formatted = formatWebsiteUsage(\n\t\t\t\trows.map((r) => ({\n\t\t\t\t\thost: r.url_host,\n\t\t\t\t\ttotalMs: r.total_duration,\n\t\t\t\t\tcount: r.event_count,\n\t\t\t\t})),\n\t\t\t\ttotalMs,\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tcontent: [{ type: \"text\", text: JSON.stringify(formatted, null, 2) }],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"compare_periods\",\n\t\t{\n\t\t\tdescription: \"Compare productivity across two time periods\",\n\t\t\tinputSchema: {\n\t\t\t\tperiod1Start: z.number().describe(\"Period 1 start timestamp (ms)\"),\n\t\t\t\tperiod1End: z.number().describe(\"Period 1 end timestamp (ms)\"),\n\t\t\t\tperiod2Start: z.number().describe(\"Period 2 start timestamp (ms)\"),\n\t\t\t\tperiod2End: z.number().describe(\"Period 2 end timestamp (ms)\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst focusCategories = [\"Work\", \"Study\"];\n\n\t\t\tfunction getPeriodStats(start: number, end: number) {\n\t\t\t\tconst events = db\n\t\t\t\t\t.prepare<\n\t\t\t\t\t\t[number, number],\n\t\t\t\t\t\t{ category: string | null; duration: number }\n\t\t\t\t\t>(\n\t\t\t\t\t\t`\n            SELECT \n              category,\n              COALESCE(end_timestamp, timestamp + 60000) - timestamp as duration\n            FROM events\n            WHERE timestamp >= ? AND timestamp <= ?\n              AND dismissed = 0 AND status = 'completed'\n          `,\n\t\t\t\t\t)\n\t\t\t\t\t.all(start, end);\n\n\t\t\t\tlet focusMs = 0;\n\t\t\t\tlet distractionMs = 0;\n\n\t\t\t\tfor (const e of events) {\n\t\t\t\t\tif (e.category && focusCategories.includes(e.category)) {\n\t\t\t\t\t\tfocusMs += e.duration;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdistractionMs += e.duration;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn { focusMs, distractionMs, count: events.length };\n\t\t\t}\n\n\t\t\tconst stats1 = getPeriodStats(params.period1Start, params.period1End);\n\t\t\tconst stats2 = getPeriodStats(params.period2Start, params.period2End);\n\n\t\t\tconst comparison = formatPeriodComparison(\n\t\t\t\t`${formatDateShort(params.period1Start)} - ${formatDateShort(params.period1End)}`,\n\t\t\t\t`${formatDateShort(params.period2Start)} - ${formatDateShort(params.period2End)}`,\n\t\t\t\tstats1,\n\t\t\t\tstats2,\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tcontent: [{ type: \"text\", text: JSON.stringify(comparison, null, 2) }],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\nimport { getDatabase, getDayEnd, getDayStart } from \"../database\";\nimport { formatAddictionStats, formatFocusScore } from \"../formatters\";\nimport type { DbEvent, DbMemory } from \"../types\";\n\nexport function registerAwarenessTools(server: McpServer): void {\n\tserver.registerTool(\n\t\t\"get_addiction_stats\",\n\t\t{\n\t\t\tdescription: \"Get addiction tracking statistics\",\n\t\t\tinputSchema: {\n\t\t\t\tname: z\n\t\t\t\t\t.string()\n\t\t\t\t\t.optional()\n\t\t\t\t\t.describe(\"Specific addiction name (optional)\"),\n\t\t\t\tdays: z.number().default(14).describe(\"Number of days to analyze\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst addictions = db\n\t\t\t\t.prepare<[], DbMemory>(`SELECT * FROM memory WHERE type = 'addiction'`)\n\t\t\t\t.all();\n\n\t\t\tif (addictions.length === 0) {\n\t\t\t\treturn {\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\ttext: JSON.stringify({ message: \"No addictions tracked\" }),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst now = Date.now();\n\t\t\tconst weekAgo = now - 7 * 24 * 60 * 60 * 1000;\n\t\t\tconst twoWeeksAgo = now - 14 * 24 * 60 * 60 * 1000;\n\n\t\t\tconst targetAddictions = params.name\n\t\t\t\t? addictions.filter((a) =>\n\t\t\t\t\t\ta.content.toLowerCase().includes(params.name!.toLowerCase()),\n\t\t\t\t\t)\n\t\t\t\t: addictions;\n\n\t\t\tconst stats = targetAddictions.map((addiction) => {\n\t\t\t\tconst thisWeekEvents = db\n\t\t\t\t\t.prepare<[string, number], { count: number }>(\n\t\t\t\t\t\t`\n            SELECT COUNT(*) as count FROM events\n            WHERE tracked_addiction = ? AND timestamp >= ?\n              AND dismissed = 0\n          `,\n\t\t\t\t\t)\n\t\t\t\t\t.get(addiction.content, weekAgo);\n\n\t\t\t\tconst lastWeekEvents = db\n\t\t\t\t\t.prepare<[string, number, number], { count: number }>(\n\t\t\t\t\t\t`\n            SELECT COUNT(*) as count FROM events\n            WHERE tracked_addiction = ? AND timestamp >= ? AND timestamp < ?\n              AND dismissed = 0\n          `,\n\t\t\t\t\t)\n\t\t\t\t\t.get(addiction.content, twoWeeksAgo, weekAgo);\n\n\t\t\t\tconst lastIncident = db\n\t\t\t\t\t.prepare<[string], { timestamp: number } | undefined>(\n\t\t\t\t\t\t`\n            SELECT timestamp FROM events\n            WHERE tracked_addiction = ? AND dismissed = 0\n            ORDER BY timestamp DESC\n            LIMIT 1\n          `,\n\t\t\t\t\t)\n\t\t\t\t\t.get(addiction.content);\n\n\t\t\t\treturn formatAddictionStats(\n\t\t\t\t\taddiction.content,\n\t\t\t\t\tlastIncident?.timestamp ?? null,\n\t\t\t\t\tthisWeekEvents?.count ?? 0,\n\t\t\t\t\tlastWeekEvents?.count ?? 0,\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tcontent: [{ type: \"text\", text: JSON.stringify(stats, null, 2) }],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"get_focus_score\",\n\t\t{\n\t\t\tdescription: \"Get focus/distraction score for a day\",\n\t\t\tinputSchema: {\n\t\t\t\tdate: z\n\t\t\t\t\t.string()\n\t\t\t\t\t.optional()\n\t\t\t\t\t.describe(\"Date string (YYYY-MM-DD) or 'today'\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tlet targetDate: Date;\n\t\t\tif (!params.date || params.date === \"today\") {\n\t\t\t\ttargetDate = new Date();\n\t\t\t} else {\n\t\t\t\ttargetDate = new Date(params.date);\n\t\t\t}\n\n\t\t\tconst dayStart = getDayStart(targetDate);\n\t\t\tconst dayEnd = getDayEnd(targetDate);\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[number, number], DbEvent>(\n\t\t\t\t\t`\n          SELECT * FROM events\n          WHERE timestamp >= ? AND timestamp <= ?\n            AND dismissed = 0 AND status = 'completed'\n        `,\n\t\t\t\t)\n\t\t\t\t.all(dayStart, dayEnd);\n\n\t\t\tconst focusCategories = [\"Work\", \"Study\"];\n\t\t\tlet focusMs = 0;\n\t\t\tlet distractionMs = 0;\n\t\t\tconst distractionCounts: Record<string, number> = {};\n\n\t\t\tfor (const event of events) {\n\t\t\t\tconst duration =\n\t\t\t\t\t(event.end_timestamp || event.timestamp + 60000) - event.timestamp;\n\n\t\t\t\tif (event.tracked_addiction) {\n\t\t\t\t\tdistractionMs += duration;\n\t\t\t\t\tdistractionCounts[event.tracked_addiction] =\n\t\t\t\t\t\t(distractionCounts[event.tracked_addiction] || 0) + duration;\n\t\t\t\t} else if (event.category && focusCategories.includes(event.category)) {\n\t\t\t\t\tfocusMs += duration;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst topDistractions = Object.entries(distractionCounts)\n\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t.slice(0, 5)\n\t\t\t\t.map(([name, ms]) => ({ name, ms }));\n\n\t\t\tconst score = formatFocusScore(\n\t\t\t\ttargetDate,\n\t\t\t\tfocusMs,\n\t\t\t\tdistractionMs,\n\t\t\t\tfocusCategories,\n\t\t\t\ttopDistractions,\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tcontent: [{ type: \"text\", text: JSON.stringify(score, null, 2) }],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\nimport { getDatabase, getHoursAgo } from \"../database\";\nimport { formatEventsForLLM } from \"../formatters\";\nimport { getImageBase64, getMimeType } from \"../images\";\nimport type { DbEvent } from \"../types\";\n\ntype TextContent = { type: \"text\"; text: string };\ntype ImageContent = { type: \"image\"; data: string; mimeType: string };\ntype ContentItem = TextContent | ImageContent;\n\nexport function registerEventTools(server: McpServer): void {\n\tserver.registerTool(\n\t\t\"query_events\",\n\t\t{\n\t\t\tdescription: \"Query activity events with flexible filters\",\n\t\t\tinputSchema: {\n\t\t\t\tstartDate: z.number().optional().describe(\"Start timestamp (ms)\"),\n\t\t\t\tendDate: z.number().optional().describe(\"End timestamp (ms)\"),\n\t\t\t\tcategory: z\n\t\t\t\t\t.string()\n\t\t\t\t\t.optional()\n\t\t\t\t\t.describe(\"Filter by category (Work, Study, Leisure, etc.)\"),\n\t\t\t\tproject: z.string().optional().describe(\"Filter by project name\"),\n\t\t\t\tapp: z.string().optional().describe(\"Filter by app name\"),\n\t\t\t\turlHost: z.string().optional().describe(\"Filter by website host\"),\n\t\t\t\tlimit: z\n\t\t\t\t\t.number()\n\t\t\t\t\t.default(50)\n\t\t\t\t\t.describe(\"Maximum number of events to return\"),\n\t\t\t\tincludeImages: z\n\t\t\t\t\t.boolean()\n\t\t\t\t\t.default(false)\n\t\t\t\t\t.describe(\"Include screenshot images\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst conditions: string[] = [\"dismissed = 0\", \"status = 'completed'\"];\n\t\t\tconst values: (string | number)[] = [];\n\n\t\t\tif (params.startDate) {\n\t\t\t\tconditions.push(\"timestamp >= ?\");\n\t\t\t\tvalues.push(params.startDate);\n\t\t\t}\n\t\t\tif (params.endDate) {\n\t\t\t\tconditions.push(\"timestamp <= ?\");\n\t\t\t\tvalues.push(params.endDate);\n\t\t\t}\n\t\t\tif (params.category) {\n\t\t\t\tconditions.push(\"category = ?\");\n\t\t\t\tvalues.push(params.category);\n\t\t\t}\n\t\t\tif (params.project) {\n\t\t\t\tconditions.push(\"project = ?\");\n\t\t\t\tvalues.push(params.project);\n\t\t\t}\n\t\t\tif (params.app) {\n\t\t\t\tconditions.push(\"app_name LIKE ?\");\n\t\t\t\tvalues.push(`%${params.app}%`);\n\t\t\t}\n\t\t\tif (params.urlHost) {\n\t\t\t\tconditions.push(\"url_host = ?\");\n\t\t\t\tvalues.push(params.urlHost);\n\t\t\t}\n\n\t\t\tconst query = `\n        SELECT * FROM events\n        WHERE ${conditions.join(\" AND \")}\n        ORDER BY timestamp DESC\n        LIMIT ?\n      `;\n\t\t\tvalues.push(params.limit);\n\n\t\t\tconst events = db.prepare<unknown[], DbEvent>(query).all(...values);\n\t\t\tconst formatted = formatEventsForLLM(events, true);\n\n\t\t\tconst content: ContentItem[] = [\n\t\t\t\t{ type: \"text\", text: JSON.stringify(formatted, null, 2) },\n\t\t\t];\n\n\t\t\tif (params.includeImages) {\n\t\t\t\tfor (const event of events) {\n\t\t\t\t\tconst imagePath = event.original_path || event.thumbnail_path;\n\t\t\t\t\tconst base64 = getImageBase64(imagePath);\n\t\t\t\t\tif (base64) {\n\t\t\t\t\t\tcontent.push({\n\t\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t\t\tdata: base64,\n\t\t\t\t\t\t\tmimeType: getMimeType(imagePath),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { content };\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"search_events\",\n\t\t{\n\t\t\tdescription: \"Full-text search across captions and window titles\",\n\t\t\tinputSchema: {\n\t\t\t\tquery: z.string().describe(\"Search query\"),\n\t\t\t\tstartDate: z.number().optional().describe(\"Start timestamp (ms)\"),\n\t\t\t\tendDate: z.number().optional().describe(\"End timestamp (ms)\"),\n\t\t\t\tlimit: z\n\t\t\t\t\t.number()\n\t\t\t\t\t.default(20)\n\t\t\t\t\t.describe(\"Maximum number of events to return\"),\n\t\t\t\tincludeImages: z\n\t\t\t\t\t.boolean()\n\t\t\t\t\t.default(false)\n\t\t\t\t\t.describe(\"Include screenshot images\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst conditions: string[] = [\n\t\t\t\t\"dismissed = 0\",\n\t\t\t\t\"status = 'completed'\",\n\t\t\t\t\"(caption LIKE ? OR window_title LIKE ? OR app_name LIKE ?)\",\n\t\t\t];\n\t\t\tconst searchPattern = `%${params.query}%`;\n\t\t\tconst values: (string | number)[] = [\n\t\t\t\tsearchPattern,\n\t\t\t\tsearchPattern,\n\t\t\t\tsearchPattern,\n\t\t\t];\n\n\t\t\tif (params.startDate) {\n\t\t\t\tconditions.push(\"timestamp >= ?\");\n\t\t\t\tvalues.push(params.startDate);\n\t\t\t}\n\t\t\tif (params.endDate) {\n\t\t\t\tconditions.push(\"timestamp <= ?\");\n\t\t\t\tvalues.push(params.endDate);\n\t\t\t}\n\n\t\t\tconst sql = `\n        SELECT * FROM events\n        WHERE ${conditions.join(\" AND \")}\n        ORDER BY timestamp DESC\n        LIMIT ?\n      `;\n\t\t\tvalues.push(params.limit);\n\n\t\t\tconst events = db.prepare<unknown[], DbEvent>(sql).all(...values);\n\t\t\tconst formatted = formatEventsForLLM(events, true);\n\n\t\t\tconst content: ContentItem[] = [\n\t\t\t\t{ type: \"text\", text: JSON.stringify(formatted, null, 2) },\n\t\t\t];\n\n\t\t\tif (params.includeImages) {\n\t\t\t\tfor (const event of events) {\n\t\t\t\t\tconst imagePath = event.original_path || event.thumbnail_path;\n\t\t\t\t\tconst base64 = getImageBase64(imagePath);\n\t\t\t\t\tif (base64) {\n\t\t\t\t\t\tcontent.push({\n\t\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t\t\tdata: base64,\n\t\t\t\t\t\t\tmimeType: getMimeType(imagePath),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { content };\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"get_recent_activity\",\n\t\t{\n\t\t\tdescription: \"Get recent activity events (quick context)\",\n\t\t\tinputSchema: {\n\t\t\t\thours: z.number().default(2).describe(\"Number of hours to look back\"),\n\t\t\t\tlimit: z.number().default(30).describe(\"Maximum number of events\"),\n\t\t\t\tincludeImages: z\n\t\t\t\t\t.boolean()\n\t\t\t\t\t.default(false)\n\t\t\t\t\t.describe(\"Include screenshot images\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\t\t\tconst since = getHoursAgo(params.hours);\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[number, number], DbEvent>(\n\t\t\t\t\t`\n          SELECT * FROM events\n          WHERE timestamp >= ? AND dismissed = 0 AND status = 'completed'\n          ORDER BY timestamp DESC\n          LIMIT ?\n        `,\n\t\t\t\t)\n\t\t\t\t.all(since, params.limit);\n\n\t\t\tconst formatted = formatEventsForLLM(events, false);\n\n\t\t\tconst content: ContentItem[] = [\n\t\t\t\t{ type: \"text\", text: JSON.stringify(formatted, null, 2) },\n\t\t\t];\n\n\t\t\tif (params.includeImages) {\n\t\t\t\tfor (const event of events) {\n\t\t\t\t\tconst imagePath = event.original_path || event.thumbnail_path;\n\t\t\t\t\tconst base64 = getImageBase64(imagePath);\n\t\t\t\t\tif (base64) {\n\t\t\t\t\t\tcontent.push({\n\t\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t\t\tdata: base64,\n\t\t\t\t\t\t\tmimeType: getMimeType(imagePath),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { content };\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"get_event_image\",\n\t\t{\n\t\t\tdescription: \"Get the screenshot image for a specific event\",\n\t\t\tinputSchema: {\n\t\t\t\teventId: z.string().describe(\"The event ID\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst event = db\n\t\t\t\t.prepare<[string], DbEvent>(`SELECT * FROM events WHERE id = ?`)\n\t\t\t\t.get(params.eventId);\n\n\t\t\tif (!event) {\n\t\t\t\treturn {\n\t\t\t\t\tcontent: [{ type: \"text\" as const, text: \"Event not found\" }],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst imagePath = event.original_path || event.thumbnail_path;\n\t\t\tconst base64 = getImageBase64(imagePath);\n\n\t\t\tif (!base64) {\n\t\t\t\treturn {\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: \"text\" as const,\n\t\t\t\t\t\t\ttext: \"No image available for this event\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcontent: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"image\" as const,\n\t\t\t\t\t\tdata: base64,\n\t\t\t\t\t\tmimeType: getMimeType(imagePath),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import { existsSync, readFileSync } from \"node:fs\";\n\nexport interface McpImageContent {\n\ttype: \"image\";\n\tdata: string;\n\tmimeType: string;\n}\n\nexport function getImageBase64(imagePath: string | null): string | null {\n\tif (!imagePath || !existsSync(imagePath)) {\n\t\treturn null;\n\t}\n\n\ttry {\n\t\tconst buffer = readFileSync(imagePath);\n\t\treturn buffer.toString(\"base64\");\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function getMimeType(path: string | null): string {\n\tif (!path) return \"image/png\";\n\tif (path.endsWith(\".webp\")) return \"image/webp\";\n\tif (path.endsWith(\".jpg\") || path.endsWith(\".jpeg\")) return \"image/jpeg\";\n\treturn \"image/png\";\n}\n\nexport function getEventImage(\n\toriginalPath: string | null,\n\tthumbnailPath: string | null,\n): { base64: string; mimeType: string } | null {\n\tconst path = originalPath || thumbnailPath;\n\tconst base64 = getImageBase64(path);\n\tif (!base64) return null;\n\treturn { base64, mimeType: getMimeType(path) };\n}\n\nexport function formatImageContent(\n\tbase64: string,\n\tmimeType: string,\n): McpImageContent {\n\treturn {\n\t\ttype: \"image\",\n\t\tdata: base64,\n\t\tmimeType,\n\t};\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\nimport { getDatabase, getDaysAgo } from \"../database\";\nimport {\n\tformatDuration,\n\tformatEventsForLLM,\n\tformatProject,\n} from \"../formatters\";\nimport { getImageBase64, getMimeType } from \"../images\";\nimport type { DbEvent } from \"../types\";\n\ninterface ProjectRow {\n\tproject: string;\n\tevent_count: number;\n\tprogress_count: number;\n\tlast_activity: number;\n\ttotal_duration: number;\n}\n\ntype TextContent = { type: \"text\"; text: string };\ntype ImageContent = { type: \"image\"; data: string; mimeType: string };\ntype ContentItem = TextContent | ImageContent;\n\nexport function registerProjectTools(server: McpServer): void {\n\tserver.registerTool(\n\t\t\"get_project_progress\",\n\t\t{\n\t\t\tdescription: \"Get progress events for a project\",\n\t\t\tinputSchema: {\n\t\t\t\tproject: z.string().describe(\"Project name\"),\n\t\t\t\tstartDate: z.number().optional().describe(\"Start timestamp (ms)\"),\n\t\t\t\tendDate: z.number().optional().describe(\"End timestamp (ms)\"),\n\t\t\t\tincludeImages: z\n\t\t\t\t\t.boolean()\n\t\t\t\t\t.default(false)\n\t\t\t\t\t.describe(\"Include screenshot images\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst conditions: string[] = [\n\t\t\t\t\"project = ?\",\n\t\t\t\t\"project_progress > 0\",\n\t\t\t\t\"dismissed = 0\",\n\t\t\t\t\"status = 'completed'\",\n\t\t\t];\n\t\t\tconst values: (string | number)[] = [params.project];\n\n\t\t\tif (params.startDate) {\n\t\t\t\tconditions.push(\"timestamp >= ?\");\n\t\t\t\tvalues.push(params.startDate);\n\t\t\t}\n\t\t\tif (params.endDate) {\n\t\t\t\tconditions.push(\"timestamp <= ?\");\n\t\t\t\tvalues.push(params.endDate);\n\t\t\t}\n\n\t\t\tconst query = `\n        SELECT * FROM events\n        WHERE ${conditions.join(\" AND \")}\n        ORDER BY timestamp DESC\n        LIMIT 50\n      `;\n\n\t\t\tconst events = db.prepare<unknown[], DbEvent>(query).all(...values);\n\t\t\tconst formatted = formatEventsForLLM(events, true);\n\n\t\t\tconst content: ContentItem[] = [\n\t\t\t\t{ type: \"text\", text: JSON.stringify(formatted, null, 2) },\n\t\t\t];\n\n\t\t\tif (params.includeImages) {\n\t\t\t\tfor (const event of events) {\n\t\t\t\t\tconst imagePath = event.original_path || event.thumbnail_path;\n\t\t\t\t\tconst base64 = getImageBase64(imagePath);\n\t\t\t\t\tif (base64) {\n\t\t\t\t\t\tcontent.push({\n\t\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t\t\tdata: base64,\n\t\t\t\t\t\t\tmimeType: getMimeType(imagePath),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { content };\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"list_projects\",\n\t\t{\n\t\t\tdescription: \"List all projects with event counts and last activity\",\n\t\t},\n\t\tasync () => {\n\t\t\tconst db = getDatabase();\n\n\t\t\tconst rows = db\n\t\t\t\t.prepare<[], ProjectRow>(\n\t\t\t\t\t`\n          SELECT \n            project,\n            COUNT(*) as event_count,\n            SUM(CASE WHEN project_progress > 0 THEN 1 ELSE 0 END) as progress_count,\n            MAX(timestamp) as last_activity,\n            SUM(COALESCE(end_timestamp, timestamp + 60000) - timestamp) as total_duration\n          FROM events\n          WHERE project IS NOT NULL AND project != ''\n            AND dismissed = 0 AND status = 'completed'\n          GROUP BY project\n          ORDER BY last_activity DESC\n        `,\n\t\t\t\t)\n\t\t\t\t.all();\n\n\t\t\tconst projects = rows.map((r) =>\n\t\t\t\tformatProject(\n\t\t\t\t\tr.project,\n\t\t\t\t\tr.event_count,\n\t\t\t\t\tr.progress_count,\n\t\t\t\t\tr.last_activity,\n\t\t\t\t\tr.total_duration,\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tcontent: [\n\t\t\t\t\t{ type: \"text\" as const, text: JSON.stringify(projects, null, 2) },\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n\n\tserver.registerTool(\n\t\t\"get_project_stats\",\n\t\t{\n\t\t\tdescription: \"Get detailed statistics for a project\",\n\t\t\tinputSchema: {\n\t\t\t\tproject: z.string().describe(\"Project name\"),\n\t\t\t\tdays: z.number().default(7).describe(\"Number of days to analyze\"),\n\t\t\t},\n\t\t},\n\t\tasync (params) => {\n\t\t\tconst db = getDatabase();\n\t\t\tconst since = getDaysAgo(params.days);\n\n\t\t\tconst events = db\n\t\t\t\t.prepare<[string, number], DbEvent>(\n\t\t\t\t\t`\n          SELECT * FROM events\n          WHERE project = ? AND timestamp >= ?\n            AND dismissed = 0 AND status = 'completed'\n          ORDER BY timestamp DESC\n        `,\n\t\t\t\t)\n\t\t\t\t.all(params.project, since);\n\n\t\t\tconst progressCount = events.filter((e) => e.project_progress > 0).length;\n\t\t\tconst totalMs = events.reduce((sum, e) => {\n\t\t\t\tconst duration = (e.end_timestamp || e.timestamp + 60000) - e.timestamp;\n\t\t\t\treturn sum + duration;\n\t\t\t}, 0);\n\n\t\t\tconst appCounts: Record<string, number> = {};\n\t\t\tfor (const e of events) {\n\t\t\t\tif (e.app_name) {\n\t\t\t\t\tappCounts[e.app_name] = (appCounts[e.app_name] || 0) + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst topApps = Object.entries(appCounts)\n\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t.slice(0, 5)\n\t\t\t\t.map(([app]) => app);\n\n\t\t\tconst recentEvents = formatEventsForLLM(events.slice(0, 10), true);\n\n\t\t\tconst stats = {\n\t\t\t\tname: params.project,\n\t\t\t\tperiod: `Last ${params.days} days`,\n\t\t\t\teventCount: events.length,\n\t\t\t\tprogressCount,\n\t\t\t\ttotalTime: formatDuration(totalMs),\n\t\t\t\ttopApps,\n\t\t\t\trecentActivity: recentEvents,\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tcontent: [\n\t\t\t\t\t{ type: \"text\" as const, text: JSON.stringify(stats, null, 2) },\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t);\n}\n","import type { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { registerAnalyticsTools } from \"./analytics\";\nimport { registerAwarenessTools } from \"./awareness\";\nimport { registerEventTools } from \"./events\";\nimport { registerProjectTools } from \"./projects\";\n\nexport function registerTools(server: McpServer): void {\n\tregisterEventTools(server);\n\tregisterAnalyticsTools(server);\n\tregisterProjectTools(server);\n\tregisterAwarenessTools(server);\n}\n","import { startMcpServer } from \"./server\";\n\nawait startMcpServer();\n"],"mappings":"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","names":["z","z","z","z","z","z","z","z","z","existsSync","z","z","z"]}